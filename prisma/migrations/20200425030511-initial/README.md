# Migration `20200425030511-initial`

This migration has been generated by Diondre Edwards at 4/25/2020, 3:05:11 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Seller" (
    "email" text  NOT NULL ,
    "id" text  NOT NULL ,
    "name" text  NOT NULL ,
    "password" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Store" (
    "active" boolean  NOT NULL DEFAULT true,
    "id" text  NOT NULL ,
    "key" text   ,
    "name" text  NOT NULL ,
    "sellerId" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."SellerMembership" (
    "id" text  NOT NULL ,
    "sellerId" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Product" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "description" text   ,
    "id" text  NOT NULL ,
    "name" text  NOT NULL ,
    "price" Decimal(65,30)  NOT NULL ,
    "published" boolean  NOT NULL DEFAULT true,
    "storeId" text  NOT NULL ,
    "updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Image" (
    "id" text  NOT NULL ,
    "name" text  NOT NULL ,
    "productId" text  NOT NULL ,
    "url" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Category" (
    "description" text  NOT NULL ,
    "id" text  NOT NULL ,
    "imageUrl" text  NOT NULL ,
    "parentId" text  NOT NULL ,
    "title" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."User" (
    "email" text  NOT NULL ,
    "id" text  NOT NULL ,
    "name" text   ,
    "password" text  NOT NULL DEFAULT '',
    "username" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "Seller.email" ON "public"."Seller"("email")

CREATE UNIQUE INDEX "Store.key" ON "public"."Store"("key")

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

CREATE UNIQUE INDEX "User.username" ON "public"."User"("username")

ALTER TABLE "public"."Store" ADD FOREIGN KEY ("sellerId")REFERENCES "public"."Seller"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."SellerMembership" ADD FOREIGN KEY ("sellerId")REFERENCES "public"."Seller"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Product" ADD FOREIGN KEY ("storeId")REFERENCES "public"."Store"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Image" ADD FOREIGN KEY ("productId")REFERENCES "public"."Product"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Category" ADD FOREIGN KEY ("parentId")REFERENCES "public"."Category"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200425030511-initial
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,77 @@
+// datasource db {
+// provider = "mysql"
+// url      = env("MYSQL_URL")
+// }
+datasource db {
+  provider = "postgres"
+  url      = "postgres://market:1marketapp@localhost:5432"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+// Seller Related Schemas
+model Seller {
+  id       String  @id
+  name     String
+  email    String  @unique
+  password String  @default("")
+  store    Store[]
+}
+
+model Store {
+  id       String    @id
+  name     String
+  key      String?   @unique
+  seller   Seller    @relation(fields: [sellerId], references: [id])
+  sellerId String
+  products Product[]
+  active   Boolean   @default(true)
+}
+
+model SellerMembership {
+  id       String @id
+  seller   Seller @relation(fields: [sellerId], references: [id])
+  sellerId String
+}
+
+// Product Related Schemas
+model Product {
+  id          String   @id
+  name        String
+  description String?
+  images      Image[]
+  price       Float
+  store       Store    @relation(fields: [storeId], references: [id])
+  storeId     String
+  published   Boolean  @default(true)
+  createdAt   DateTime @default(now())
+  updatedAt   DateTime @updatedAt
+}
+
+model Image {
+  id        String  @id
+  name      String
+  url       String
+  product   Product @relation(fields: [productId], references: [id])
+  productId String
+}
+
+model Category {
+  id          String   @id
+  title       String
+  description String
+  parent      Category @relation("CategoryToCategory", fields: [parentId], references: [id])
+  parentId    String
+  imageUrl    String
+}
+
+// User Related Schemas
+model User {
+  id       String  @id
+  email    String  @unique
+  username String  @unique
+  name     String?
+  password String  @default("")
+}
```


