# Migration `20200429212232-first`

This migration has been generated by Diondre Edwards at 4/29/2020, 9:22:32 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Seller" (
    "email" text  NOT NULL ,
    "id" text  NOT NULL ,
    "name" text  NOT NULL ,
    "password" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Store" (
    "active" boolean  NOT NULL DEFAULT true,
    "biography" text   ,
    "coverImage" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "key" text   ,
    "logo" text  NOT NULL DEFAULT '',
    "name" text  NOT NULL ,
    "sellerId" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Membership" (
    "description" text  NOT NULL ,
    "id" text  NOT NULL ,
    "price" Decimal(65,30)  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."SellerMembership" (
    "active" boolean  NOT NULL DEFAULT true,
    "id" text  NOT NULL ,
    "membershipId" text  NOT NULL ,
    "sellerId" text  NOT NULL ,
    "startDate" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Product" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "description" text   ,
    "featuredImage" text   ,
    "id" text  NOT NULL ,
    "images" text []  ,
    "name" text  NOT NULL ,
    "price" Decimal(65,30)  NOT NULL ,
    "published" boolean  NOT NULL DEFAULT true,
    "storeId" text  NOT NULL ,
    "updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Category" (
    "description" text  NOT NULL ,
    "id" text  NOT NULL ,
    "imageUrl" text  NOT NULL ,
    "parentId" text  NOT NULL ,
    "title" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."User" (
    "email" text  NOT NULL ,
    "id" text  NOT NULL ,
    "name" text   ,
    "password" text  NOT NULL DEFAULT '',
    "username" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "Seller.email" ON "public"."Seller"("email")

CREATE UNIQUE INDEX "Store.key" ON "public"."Store"("key")

CREATE UNIQUE INDEX "SellerMembership_sellerId" ON "public"."SellerMembership"("sellerId")

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

CREATE UNIQUE INDEX "User.username" ON "public"."User"("username")

ALTER TABLE "public"."Store" ADD FOREIGN KEY ("sellerId")REFERENCES "public"."Seller"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."SellerMembership" ADD FOREIGN KEY ("membershipId")REFERENCES "public"."Membership"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."SellerMembership" ADD FOREIGN KEY ("sellerId")REFERENCES "public"."Seller"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Product" ADD FOREIGN KEY ("storeId")REFERENCES "public"."Store"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Category" ADD FOREIGN KEY ("parentId")REFERENCES "public"."Category"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200429212232-first
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,86 @@
+// datasource db {
+// provider = "mysql"
+// url      = env("MYSQL_URL")
+// }
+datasource db {
+  provider = "postgres"
+  url      = "postgres://market:1marketapp@localhost:5432"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+// Seller Related Schemas
+model Seller {
+  id         String            @id
+  name       String
+  email      String            @unique
+  password   String            @default("")
+  store      Store[]
+  membership SellerMembership?
+}
+
+model Store {
+  id         String    @id
+  name       String
+  biography  String?
+  key        String?   @unique
+  seller     Seller    @relation(fields: [sellerId], references: [id])
+  sellerId   String
+  products   Product[]
+  active     Boolean   @default(true)
+  logo       String    @default("")
+  coverImage String    @default("")
+}
+
+model Membership {
+  id          String @id
+  description String
+  price       Float
+}
+
+// paymen
+model SellerMembership {
+  id           String     @id
+  active       Boolean    @default(true)
+  membershipId String
+  membership   Membership @relation(fields: [membershipId], references: [id])
+  sellerId     String
+  seller       Seller     @relation(fields: [sellerId], references: [id])
+  startDate    DateTime   @default(now())
+  updatedAt    DateTime   @updatedAt
+}
+
+// Product Related Schemas
+model Product {
+  id            String   @id
+  name          String
+  description   String?
+  images        String[]
+  featuredImage String?
+  price         Float
+  store         Store    @relation(fields: [storeId], references: [id])
+  storeId       String
+  published     Boolean  @default(true)
+  createdAt     DateTime @default(now())
+  updatedAt     DateTime @updatedAt
+}
+
+model Category {
+  id          String   @id
+  title       String
+  description String
+  parent      Category @relation("CategoryToCategory", fields: [parentId], references: [id])
+  parentId    String
+  imageUrl    String
+}
+
+// User Related Schemas
+model User {
+  id       String  @id
+  email    String  @unique
+  username String  @unique
+  name     String?
+  password String  @default("")
+}
```


